<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
							xmlns:s="library://ns.adobe.com/flex/spark" 
							creationComplete="init(event)"
							splashScreenImage="@Embed('assets/images/splashScreen.png')"
							splashScreenMinimumDisplayTime="1000"
							splashScreenScaleMode="zoom"
							>
	
	<fx:Style source="styles/MainStyle.css"/>
	
	<fx:Script>
		<![CDATA[
			import VOs.DataObject;
			
			import com.adobe.webapis.flickr.FlickrService;
			import com.squidzoo.eventSystem.EventCentral;
			import com.squidzoo.eventSystem.events.CustomEvent;
			
			import components.MenuPopUp;
			
			import mx.events.FlexEvent;
			
			import spark.transitions.ViewTransitionDirection;
			import spark.transitions.ZoomViewTransition;
			import spark.transitions.ZoomViewTransitionMode;
			
			import statics.Keys;
			import statics.Service;
			import statics.ViewTypes;
			
			import views.BatchUploadView;
			import views.BrowseSets;
			import views.HomeView;
			import views.LoginView;
			import views.MultiplePhotosView;
			
			private var _popup:MenuPopUp;
			
			public var _service:FlickrService;
			
			private function init(event:FlexEvent):void{
				_popup = new MenuPopUp();
				
				_service = new FlickrService();
				
				Service.setService(_service);
				
				_service.api_key = Keys.getApiKey();
				_service.secret = Keys.getSecretKey();
			
				
				//this.actionBar.alpha=0;
				//this.actionBar.visible=false;
				
				//var zoomTrans:ZoomViewTransition = new ZoomViewTransition();
				//zoomTrans.direction = ViewTransitionDirection.RIGHT;
				//zoomTrans.mode = ZoomViewTransitionMode.IN; //or OUT mode
				navigator.pushView(LoginView);
				//navigator.pushView(LoginView,_service);
			}
			
			private function addMenuListeners():void{
				EventCentral.getInstance().addEventListener(CustomEvent.ACTIONBAR_MENU_ICON_CLICKED_UPLOAD, onUpload);
				EventCentral.getInstance().addEventListener(CustomEvent.ACTIONBAR_MENU_ICON_CLICKED_BROWSE_SETS, onBrowseSets);
				EventCentral.getInstance().addEventListener(CustomEvent.ACTIONBAR_MENU_ICON_CLICKED_PHOTOSTREAM, onPhotostream);
			}
			
			private function onUpload(event:CustomEvent):void{
				navigator.pushView(BatchUploadView,_service);
			}
			
			private function onBrowseSets(event:CustomEvent):void{
				navigator.pushView(BrowseSets,_service);
			}
			
			public function getService():FlickrService{
				return _service;
			}		
			
			protected function onPhotostream(event:Event):void
			{
				var dataObject:DataObject = new DataObject();
				dataObject.viewType = ViewTypes.PHOTO_STREAM;
				navigator.pushView(MultiplePhotosView,dataObject);
			}
			
		]]>
	</fx:Script>
	
	<s:navigationContent>
		<s:Image source="@Embed('assets/images/FastrLP6.png')"/>
	</s:navigationContent>
	
	<!--<s:actionContent>
		<s:Button id="menuButton" icon="@Embed(source='assets/images/menuLightGrey.png')" click="_popup.show()"/>
	</s:actionContent>-->
	
</s:ViewNavigatorApplication>
